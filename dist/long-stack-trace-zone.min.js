!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r():"function"==typeof define&&define.amd?define(r):r()}(this,function(){"use strict";function t(){return new Error(f)}function r(){try{throw t()}catch(r){return r}}function a(t){return t.stack?t.stack.split(i):[]}function n(t,r){for(var n=a(r),e=0;e<n.length;e++){var c=n[e];s.hasOwnProperty(c)||t.push(n[e])}}function e(t,r){r||Zone.root.run(function(){Error.stackTraceLimit=1/0;try{throw new Error("debug")}catch(t){console.log("longstacktrace stack null",t.stack,t)}});var a=[r.trim()];if(t)for(var e=(new Date).getTime(),c=0;c<t.length;c++){var o=t[c],s=o.timestamp,u="____________________Elapsed "+(e-s.getTime())+" ms; At: "+s;u=u.replace(/[^\w\d]/g,"_"),a.push(l.replace(_,u)),n(a,o.error),e=s.getTime()}return a.join(i)}function c(t,r){r>0&&(t.push(a((new k).error)),c(t,r-1))}function o(){var t=[];c(t,2);for(var r=t[0],a=t[1],n=0;n<r.length;n++){var e=r[n];if(e.indexOf(f)==-1){var o=e.match(/^\s*at\s+/);if(o){l=o[0]+_+" (http://localhost)";break}}}for(var n=0;n<r.length;n++){var e=r[n],i=a[n];if(e!==i)break;s[e]=!0}}var i="\n",s={},u="__creationTrace__",f="STACKTRACE TRACKING",_="__SEP_TAG__",l=_+"@[native]",k=function(){function t(){this.error=g(),this.timestamp=new Date}return t}(),h=t(),d=r(),g=h.stack?t:d.stack?r:t;Zone.longStackTraceZoneSpec={name:"long-stack-trace",longStackTraceLimit:10,getLongStackTrace:function(t){if(t){var r=t[Zone.__symbol__("currentTask")],a=r&&r.data&&r.data[u];return a?e(a,t.stack):t.stack}},onScheduleTask:function(t,r,a,n){var e=Zone.currentTask,c=e&&e.data&&e.data[u]||[];return c=[new k].concat(c),c.length>this.longStackTraceLimit&&(c.length=this.longStackTraceLimit),n.data||(n.data={}),n.data[u]=c,t.scheduleTask(a,n)},onHandleError:function(t,r,a,n){var c=Zone.currentTask||n.task;if(n instanceof Error&&c){var o=e(c.data&&c.data[u],n.stack);try{n.stack=n.longStack=o}catch(i){}}return t.handleError(a,n)}},o()});